import java.io.IOException;
import java.io.InputStream;
import java.net.URL;

public class ClassLoaderTheme implements Theme {

    public InputStream getResourceAsStream(String path) throws IOException {
        final URL rootResourceURL = classLoader.getResource(resourceRoot);
        if (rootResourceURL == null) {
            return null;
        }
        final String rootPath = rootResourceURL.getPath();
        final URL resourceURL = classLoader.getResource(resourceRoot + path);
        if (resourceURL == null || !resourceURL.getPath().startsWith(rootPath)) {
            return null;
        } else {
            return resourceURL.openConnection().getInputStream();
        }
    }
}